# 【14】資安的原罪 ch.3-2.a 零日攻擊

Imagine leaving your house with the front door slightly open — not because you forgot, but because the lock was flawed. In the digital world, that's what a vulnerability is. It's a weakness — a gap — that attackers can find and exploit
絕對防部不了的攻擊

---

## 什麼是弱點?

A vulnerability in cybersecurity refers to a weakness or flaw in a system, software, network, or process that can be exploited by an attacker to gain unauthorized access, disrupt services, or steal data.

Think of it as:
- A crack in the armor.
- A loophole in the rules.
- An unintended backdoor left open.

---

## 有弱點會怎樣

Vulnerabilities are the starting point for most cyberattacks. Hackers don't need to break the door down if they can find a door that’s already open.
若有執行任意程式碼弱點，基本上等於完全操控了我們的電腦和手機

- Real-world consequences: data breaches, ransomware, financial loss, reputation damage.
- They exist everywhere — from government systems to your personal phone.

### Example
"Let me give you an example of how a tiny flaw in code can cause a massive global security issue."
In 2014, a major vulnerability called Heartbleed was discovered in OpenSSL, a widely used cryptographic library that secures communication on the internet — think HTTPS, VPNs, emails.
This vulnerability wasn’t caused by an attacker planting malware. It was just a simple mistake in memory handling.

🧠 What Was Heartbleed?
A buffer over-read — a type of memory vulnerability.
An attacker could send a specially crafted request and trick the server into leaking up to 64KB of memory.
What leaked? Potentially private keys, usernames, passwords, and other sensitive data — without leaving any trace.
"In other words, attackers could read memory they were never supposed to access — like reading secret letters through a hole in the envelope."

### 1. 🔐 **Privilege Escalation**

* Gaining **higher-level access** than originally permitted
* Example: A vulnerability lets a regular user become an admin or root
* Common with local memory bugs or insecure permission settings

> *“Think of it like walking into a building with a guest pass, then finding a way to unlock the executive offices.”*

---

### 2. 🌐 **Remote Code Execution (RCE)**

* The attacker can run **arbitrary code** on a remote machine
* One of the most dangerous outcomes
* Often seen with **buffer overflows**, deserialization bugs, or command injection

> *“RCE is like someone sending a booby-trapped file to your system — and then it starts running commands as if they were sitting at your keyboard.”*

---

### 4. 🕵️‍♂️ **Information Disclosure**

* Leaks of sensitive data: passwords, tokens, keys, internal code
* Example: Heartbleed leaked memory contents from affected servers
* Common with XSS, misconfigurations, or exposed APIs

> *“Even without direct control, leaking the wrong data can be just as dangerous — it's often how attackers plan their next move.”*

---

### 5. 📦 **Denial of Service (DoS)**

* Vulnerabilities that allow attackers to **crash or overload** a system
* Not always as dramatic as code execution, but still very disruptive
* Example: resource exhaustion bugs, infinite loops, or crash-inducing inputs

> *“Sometimes attackers don’t want to break in — they just want to shut everything down.”*

---

## 有那些常見弱點類型?

### 1. **Memory Vulnerabilities**

Memory management flaws are especially dangerous in languages like C and C++ (which OpenSSL is written in).

**Examples include:**

* **Buffer overflows** / **buffer over-reads** (like Heartbleed)
* **Use-after-free**
* **Null pointer dereferences**

> *"These bugs let attackers access or overwrite areas of memory they shouldn’t — which can lead to crashes, data leaks, or even remote code execution."*

抵抗記憶體溢出的語言 JAVA  RUST C#

---

### 2. **Injection Vulnerabilities**

These occur when **untrusted data is interpreted as code**.

**Examples include:**

* **SQL Injection**
* **Command Injection**
* **LDAP/XML Injection**

> *"Think of it like this — you ask the database a question, but the attacker sneaks in a new command that changes the question entirely. Suddenly, instead of looking up one user, the database is dumping all users."*

These are **still among the most exploited bugs** on the web, despite being well-known.
消毒 固定格式與據 PreparedStatement

---

## XSS
"XSS is best described as a client-side injection vulnerability — the attacker injects malicious scripts that run in the user's browser, not on the server."


In simple terms: XSS lets attackers hijack the browser — not the server — and steal things like cookies, sessions, or even login credentials.

### 🚨 Why XSS is Dangerous

* Can **steal sessions**, impersonate users
* Used in **phishing attacks** and **malware delivery**
* Can **modify the entire page** — fake login forms, redirect users
* Often **bypasses even secure HTTPS**, because it runs in the browser



### 🔒 Types of XSS (Optional, Quick Mention)

You don’t need to go deep, but these terms help if you're speaking to a technical audience:

1. **Stored XSS** – Script is permanently stored (e.g., in a database)
2. **Reflected XSS** – Script is reflected immediately (e.g., via URL)
3. **DOM-based XSS** – Vulnerability is in client-side JavaScript

---

# 弱點接露
google project zero

---

## SIN

## 人出錯
軟體 人寫 一定會有出錯可能 無法保證沒有
TODO:
大公司案例

## 弱點發現
弱點的發現辦法對防禦起到幫助
同類型的弱點找到出現在這處，不代表能存在其他處的同弱點都能被找到，也不代表未來寫的程式都能避免這弱點


## Memory

C C++語言讓使用者控制，是優勢，也就會有出錯的空間
### Linux應對
ASLRR 位址空間配置隨機 Address Space Layout Randomization 之前一般都是位在記憶體空間頂部 ASLR隱藏堆疊
ASLR很快失效 駭客找到堆疊位址的方法
推出ESP 可執行空間保護 Executeable Space Protection 會將推疊所在的記憶體為指標是為不可執行 就算破解ASLR找到植入代碼 ESP也會拒絕執行
ESP 失效 Return Oriented Programming返回導向程式設計 不再將惡意軟體植入堆疊 而是尋找堆疊外可以協助完成任位的代碼片段
ROP中 每個片段結尾的指令 都是返回到堆疊 每個片段的記憶體位只放在堆疊上 串接再一起執行惡意程式 
片段跳轉到堆疊 堆疊跳轉到片段 控制程式流

### Injection
SQL注入 相對容易預防 卻還是很常見


### Zero day
零時差

### Patch
還沒修補已知弱點

修補程式 逆向工程 發覺與弱點息息相關的線索
成為駭客尋找弱點的燈塔 入侵尚未補丁的裝置
修補星期二 漏洞利用星期三

修補程式發布 不願意更新
安裝後造成的問題 軟體相衝 修補程式造成電腦當季
微軟自己也沒準時安裝補丁"就跟整個產業一樣，都很難在修補程式上按應遵循的標準做到百分之百"
'We, like the rest of the industry, struggle to get 100 percent compliance with our patch management,''
On the other hand, their own actions demonstrate how unrealistic that position is.' [連結](https://www.nytimes.com/2003/01/28/business/technology-worm-hits-microsoft-which-ignored-own-advice.html)